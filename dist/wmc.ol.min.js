!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=36)}([function(t,e){(function(){t.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},function(t,e,n){(function(){var e,r,i,o,s,a,l,h,u,c,d,p,f,m,y,g,w={}.hasOwnProperty,b=[].splice;({isObject:g,isFunction:y,isEmpty:m,getValue:f}=n(2)),h=null,i=null,o=null,s=null,a=null,d=null,p=null,c=null,l=null,r=null,u=null,e=null,t.exports=function(){class t{constructor(t){this.parent=t,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,h||(h=n(5),i=n(7),o=n(8),s=n(9),a=n(10),d=n(15),p=n(16),c=n(17),l=n(22),r=n(0),u=n(32),n(6),e=n(33))}setParent(t){var e,n,r,i,o;for(this.parent=t,t&&(this.options=t.options,this.stringify=t.stringify),o=[],n=0,r=(i=this.children).length;n<r;n++)e=i[n],o.push(e.setParent(this));return o}element(t,e,n){var r,i,o,s,a,l,h,u,c;if(l=null,null===e&&null==n&&([e,n]=[{},null]),null==e&&(e={}),e=f(e),g(e)||([n,e]=[e,n]),null!=t&&(t=f(t)),Array.isArray(t))for(o=0,h=t.length;o<h;o++)i=t[o],l=this.element(i);else if(y(t))l=this.element(t.apply());else if(g(t)){for(a in t)if(w.call(t,a))if(c=t[a],y(c)&&(c=c.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===a.indexOf(this.stringify.convertAttKey))l=this.attribute(a.substr(this.stringify.convertAttKey.length),c);else if(!this.options.separateArrayItems&&Array.isArray(c)&&m(c))l=this.dummy();else if(g(c)&&m(c))l=this.element(a);else if(this.options.keepNullNodes||null!=c)if(!this.options.separateArrayItems&&Array.isArray(c))for(s=0,u=c.length;s<u;s++)i=c[s],(r={})[a]=i,l=this.element(r);else g(c)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===a.indexOf(this.stringify.convertTextKey)?l=this.element(c):(l=this.element(a)).element(c):l=this.element(a,c);else l=this.dummy()}else l=this.options.keepNullNodes||null!==n?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===t.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===t.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===t.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===t.indexOf(this.stringify.convertRawKey)?this.raw(n):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===t.indexOf(this.stringify.convertPIKey)?this.instruction(t.substr(this.stringify.convertPIKey.length),n):this.node(t,e,n):this.dummy();if(null==l)throw new Error("Could not create any elements with: "+t+". "+this.debugInfo());return l}insertBefore(t,e,n){var r,i,o,s,a;if(null!=t?t.type:void 0)return s=e,(o=t).setParent(this),s?(i=children.indexOf(s),a=children.splice(i),children.push(o),Array.prototype.push.apply(children,a)):children.push(o),o;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(t));return i=this.parent.children.indexOf(this),a=this.parent.children.splice(i),r=this.parent.element(t,e,n),Array.prototype.push.apply(this.parent.children,a),r}insertAfter(t,e,n){var r,i,o;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(t));return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i+1),r=this.parent.element(t,e,n),Array.prototype.push.apply(this.parent.children,o),r}remove(){var t;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return t=this.parent.children.indexOf(this),b.apply(this.parent.children,[t,t-t+1].concat([])),this.parent}node(t,e,n){var r;return null!=t&&(t=f(t)),e||(e={}),e=f(e),g(e)||([n,e]=[e,n]),r=new h(this,t,e),null!=n&&r.text(n),this.children.push(r),r}text(t){var e;return g(t)&&this.element(t),e=new p(this,t),this.children.push(e),this}cdata(t){var e;return e=new i(this,t),this.children.push(e),this}comment(t){var e;return e=new o(this,t),this.children.push(e),this}commentBefore(t){var e,n;return e=this.parent.children.indexOf(this),n=this.parent.children.splice(e),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,n),this}commentAfter(t){var e,n;return e=this.parent.children.indexOf(this),n=this.parent.children.splice(e+1),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,n),this}raw(t){var e;return e=new d(this,t),this.children.push(e),this}dummy(){return new l(this)}instruction(t,e){var n,r,i,o,s;if(null!=t&&(t=f(t)),null!=e&&(e=f(e)),Array.isArray(t))for(o=0,s=t.length;o<s;o++)n=t[o],this.instruction(n);else if(g(t))for(n in t)w.call(t,n)&&(r=t[n],this.instruction(n,r));else y(e)&&(e=e.apply()),i=new c(this,t,e),this.children.push(i);return this}instructionBefore(t,e){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,r),this}instructionAfter(t,e){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n+1),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,r),this}declaration(t,e,n){var i,o;return i=this.document(),o=new s(i,t,e,n),0===i.children.length?i.children.unshift(o):i.children[0].type===r.Declaration?i.children[0]=o:i.children.unshift(o),i.root()||i}dtd(t,e){var n,i,o,s,l,h,u,c,d;for(n=this.document(),i=new a(n,t,e),o=s=0,h=(c=n.children).length;s<h;o=++s)if(c[o].type===r.DocType)return n.children[o]=i,i;for(o=l=0,u=(d=n.children).length;l<u;o=++l)if(d[o].isRoot)return n.children.splice(o,0,i),i;return n.children.push(i),i}up(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent}root(){var t;for(t=this;t;){if(t.type===r.Document)return t.rootObject;if(t.isRoot)return t;t=t.parent}}document(){var t;for(t=this;t;){if(t.type===r.Document)return t;t=t.parent}}end(t){return this.document().end(t)}prev(){var t;if((t=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[t-1]}next(){var t;if(-1===(t=this.parent.children.indexOf(this))||t===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[t+1]}importDocument(t){var e,n,i,o,s;if((n=t.root().clone()).parent=this,n.isRoot=!1,this.children.push(n),this.type===r.Document&&(n.isRoot=!0,n.documentObject=this,this.rootObject=n,this.children))for(i=0,o=(s=this.children).length;i<o;i++)if((e=s[i]).type===r.DocType){e.name=n.name;break}return this}debugInfo(t){var e,n;return null!=(t=t||this.name)||(null!=(e=this.parent)?e.name:void 0)?null==t?"parent: <"+this.parent.name+">":(null!=(n=this.parent)?n.name:void 0)?"node: <"+t+">, parent: <"+this.parent.name+">":"node: <"+t+">":""}ele(t,e,n){return this.element(t,e,n)}nod(t,e,n){return this.node(t,e,n)}txt(t){return this.text(t)}dat(t){return this.cdata(t)}com(t){return this.comment(t)}ins(t,e){return this.instruction(t,e)}doc(){return this.document()}dec(t,e,n){return this.declaration(t,e,n)}e(t,e,n){return this.element(t,e,n)}n(t,e,n){return this.node(t,e,n)}t(t){return this.text(t)}d(t){return this.cdata(t)}c(t){return this.comment(t)}r(t){return this.raw(t)}i(t,e){return this.instruction(t,e)}u(){return this.up()}importXMLBuilder(t){return this.importDocument(t)}attribute(t,e){throw new Error("attribute() applies to element nodes only.")}att(t,e){return this.attribute(t,e)}a(t,e){return this.attribute(t,e)}removeAttribute(t){throw new Error("attribute() applies to element nodes only.")}replaceChild(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeChild(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}appendChild(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}hasChildNodes(){return 0!==this.children.length}cloneNode(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}normalize(){throw new Error("This DOM method is not implemented."+this.debugInfo())}isSupported(t,e){return!0}hasAttributes(){return 0!==this.attribs.length}compareDocumentPosition(t){var n;return this,this===t?0:this.document()!==t.document()?(n=e.Disconnected|e.ImplementationSpecific,Math.random()<.5?n|=e.Preceding:n|=e.Following,n):this.isAncestor(t)?e.Contains|e.Preceding:this.isDescendant(t)?e.Contains|e.Following:this.isPreceding(t)?e.Preceding:e.Following}isSameNode(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}lookupPrefix(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}isDefaultNamespace(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}lookupNamespaceURI(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(t){var e,n,r;if(t.nodeType!==this.nodeType)return!1;if(t.children.length!==this.children.length)return!1;for(e=n=0,r=this.children.length-1;0<=r?n<=r:n>=r;e=0<=r?++n:--n)if(!this.children[e].isEqualNode(t.children[e]))return!1;return!0}getFeature(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())}setUserData(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())}getUserData(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}contains(t){return!!t&&(t===this||this.isDescendant(t))}isDescendant(t){var e,n,r,i;for(n=0,r=(i=this.children).length;n<r;n++){if(t===(e=i[n]))return!0;if(e.isDescendant(t))return!0}return!1}isAncestor(t){return t.isDescendant(this)}isPreceding(t){var e,n;return e=this.treePosition(t),n=this.treePosition(this),-1!==e&&-1!==n&&e<n}isFollowing(t){var e,n;return e=this.treePosition(t),n=this.treePosition(this),-1!==e&&-1!==n&&e>n}treePosition(t){var e,n;return n=0,e=!1,this.foreachTreeNode(this.document(),function(r){if(n++,!e&&r===t)return e=!0}),e?n:-1}foreachTreeNode(t,e){var n,r,i,o,s;for(t||(t=this.document()),r=0,i=(o=t.children).length;r<i;r++){if(s=e(n=o[r]))return s;if(s=this.foreachTreeNode(n,e))return s}}}return Object.defineProperty(t.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new u(this.children)),this.childNodeList}}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){var t;return t=this.parent.children.indexOf(this),this.parent.children[t-1]||null}}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){var t;return t=this.parent.children.indexOf(this),this.parent.children[t+1]||null}}),Object.defineProperty(t.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(t.prototype,"textContent",{get:function(){var t,e,n,i,o;if(this.nodeType===r.Element||this.nodeType===r.DocumentFragment){for(o="",e=0,n=(i=this.children).length;e<n;e++)(t=i[e]).textContent&&(o+=t.textContent);return o}return null},set:function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),t}.call(this)}).call(this)},function(t,e){(function(){var e,n,r,i,o,s,a,l={}.hasOwnProperty;e=function(t,...e){var n,r,i,s;if(o(Object.assign))Object.assign.apply(null,arguments);else for(n=0,i=e.length;n<i;n++)if(null!=(s=e[n]))for(r in s)l.call(s,r)&&(t[r]=s[r]);return t},o=function(t){return!!t&&"[object Function]"===Object.prototype.toString.call(t)},s=function(t){var e;return!!t&&("function"==(e=typeof t)||"object"===e)},r=function(t){return o(Array.isArray)?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},i=function(t){var e;if(r(t))return!t.length;for(e in t)if(l.call(t,e))return!1;return!0},a=function(t){var e,n;return s(t)&&(n=Object.getPrototypeOf(t))&&(e=n.constructor)&&"function"==typeof e&&e instanceof e&&Function.prototype.toString.call(e)===Function.prototype.toString.call(Object)},n=function(t){return o(t.valueOf)?t.valueOf():t},t.exports.assign=e,t.exports.isFunction=o,t.exports.isObject=s,t.exports.isArray=r,t.exports.isEmpty=i,t.exports.isPlainObject=a,t.exports.getValue=n}).call(this)},function(t,e,n){(function(){var e;e=n(1),t.exports=function(){class t extends e{constructor(t){super(t),this.value=""}clone(){return Object.create(this)}substringData(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())}appendData(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}insertData(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())}deleteData(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())}replaceData(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(t){return!!super.isEqualNode(t)&&t.data===this.data}}return Object.defineProperty(t.prototype,"data",{get:function(){return this.value},set:function(t){return this.value=t||""}}),Object.defineProperty(t.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(t){return this.value=t||""}}),t}.call(this)}).call(this)},function(t,e){(function(){t.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},function(t,e,n){(function(){var e,r,i,o,s,a,l,h={}.hasOwnProperty;({isObject:l,isFunction:a,getValue:s}=n(2)),o=n(1),e=n(0),r=n(21),i=n(6),t.exports=function(){class t extends o{constructor(t,n,r){var i,o,s,a;if(super(t),null==n)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(n),this.type=e.Element,this.attribs={},this.schemaTypeInfo=null,null!=r&&this.attribute(r),t.type===e.Document&&(this.isRoot=!0,this.documentObject=t,t.rootObject=this,t.children))for(o=0,s=(a=t.children).length;o<s;o++)if((i=a[o]).type===e.DocType){i.name=this.name;break}}clone(){var t,e,n,r;for(e in(n=Object.create(this)).isRoot&&(n.documentObject=null),n.attribs={},r=this.attribs)h.call(r,e)&&(t=r[e],n.attribs[e]=t.clone());return n.children=[],this.children.forEach(function(t){var e;return(e=t.clone()).parent=n,n.children.push(e)}),n}attribute(t,e){var n,i;if(null!=t&&(t=s(t)),l(t))for(n in t)h.call(t,n)&&(i=t[n],this.attribute(n,i));else a(e)&&(e=e.apply()),this.options.keepNullAttributes&&null==e?this.attribs[t]=new r(this,t,""):null!=e&&(this.attribs[t]=new r(this,t,e));return this}removeAttribute(t){var e,n,r;if(null==t)throw new Error("Missing attribute name. "+this.debugInfo());if(t=s(t),Array.isArray(t))for(n=0,r=t.length;n<r;n++)e=t[n],delete this.attribs[e];else delete this.attribs[t];return this}toString(t){return this.options.writer.element(this,this.options.writer.filterOptions(t))}att(t,e){return this.attribute(t,e)}a(t,e){return this.attribute(t,e)}getAttribute(t){return this.attribs.hasOwnProperty(t)?this.attribs[t].value:null}setAttribute(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNode(t){return this.attribs.hasOwnProperty(t)?this.attribs[t]:null}setAttributeNode(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeAttributeNode(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNS(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())}setAttributeNS(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeAttributeNS(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNodeNS(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())}setAttributeNodeNS(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())}hasAttribute(t){return this.attribs.hasOwnProperty(t)}hasAttributeNS(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())}setIdAttribute(t,e){return this.attribs.hasOwnProperty(t)?this.attribs[t].isId:e}setIdAttributeNS(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())}setIdAttributeNode(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByClassName(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(t){var e,n,r;if(!super.isEqualNode(t))return!1;if(t.namespaceURI!==this.namespaceURI)return!1;if(t.prefix!==this.prefix)return!1;if(t.localName!==this.localName)return!1;if(t.attribs.length!==this.attribs.length)return!1;for(e=n=0,r=this.attribs.length-1;0<=r?n<=r:n>=r;e=0<=r?++n:--n)if(!this.attribs[e].isEqualNode(t.attribs[e]))return!1;return!0}}return Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(t.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(t.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(t.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(t.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(t.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new i(this.attribs)),this.attributeMap}}),t}.call(this)}).call(this)},function(t,e){(function(){t.exports=function(){class t{constructor(t){this.nodes=t}clone(){return this.nodes=null}getNamedItem(t){return this.nodes[t]}setNamedItem(t){var e;return e=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,e||null}removeNamedItem(t){var e;return e=this.nodes[t],delete this.nodes[t],e||null}item(t){return this.nodes[Object.keys(this.nodes)[t]]||null}getNamedItemNS(t,e){throw new Error("This DOM method is not implemented.")}setNamedItemNS(t){throw new Error("This DOM method is not implemented.")}removeNamedItemNS(t,e){throw new Error("This DOM method is not implemented.")}}return Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),t}.call(this)}).call(this)},function(t,e,n){(function(){var e,r;e=n(0),r=n(3),t.exports=class extends r{constructor(t,n){if(super(t),null==n)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=e.CData,this.value=this.stringify.cdata(n)}clone(){return Object.create(this)}toString(t){return this.options.writer.cdata(this,this.options.writer.filterOptions(t))}}}).call(this)},function(t,e,n){(function(){var e,r;e=n(0),r=n(3),t.exports=class extends r{constructor(t,n){if(super(t),null==n)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=e.Comment,this.value=this.stringify.comment(n)}clone(){return Object.create(this)}toString(t){return this.options.writer.comment(this,this.options.writer.filterOptions(t))}}}).call(this)},function(t,e,n){(function(){var e,r,i;({isObject:i}=n(2)),r=n(1),e=n(0),t.exports=class extends r{constructor(t,n,r,o){super(t),i(n)&&({version:n,encoding:r,standalone:o}=n),n||(n="1.0"),this.type=e.Declaration,this.version=this.stringify.xmlVersion(n),null!=r&&(this.encoding=this.stringify.xmlEncoding(r)),null!=o&&(this.standalone=this.stringify.xmlStandalone(o))}toString(t){return this.options.writer.declaration(this,this.options.writer.filterOptions(t))}}}).call(this)},function(t,e,n){(function(){var e,r,i,o,s,a,l,h;({isObject:h}=n(2)),l=n(1),e=n(0),r=n(11),o=n(12),i=n(13),s=n(14),a=n(6),t.exports=function(){class t extends l{constructor(t,n,r){var i,o,s,a;if(super(t),this.type=e.DocType,t.children)for(o=0,s=(a=t.children).length;o<s;o++)if((i=a[o]).type===e.Element){this.name=i.name;break}this.documentObject=t,h(n)&&({pubID:n,sysID:r}=n),null==r&&([r,n]=[n,r]),null!=n&&(this.pubID=this.stringify.dtdPubID(n)),null!=r&&(this.sysID=this.stringify.dtdSysID(r))}element(t,e){var n;return n=new i(this,t,e),this.children.push(n),this}attList(t,e,n,i,o){var s;return s=new r(this,t,e,n,i,o),this.children.push(s),this}entity(t,e){var n;return n=new o(this,!1,t,e),this.children.push(n),this}pEntity(t,e){var n;return n=new o(this,!0,t,e),this.children.push(n),this}notation(t,e){var n;return n=new s(this,t,e),this.children.push(n),this}toString(t){return this.options.writer.docType(this,this.options.writer.filterOptions(t))}ele(t,e){return this.element(t,e)}att(t,e,n,r,i){return this.attList(t,e,n,r,i)}ent(t,e){return this.entity(t,e)}pent(t,e){return this.pEntity(t,e)}not(t,e){return this.notation(t,e)}up(){return this.root()||this.documentObject}isEqualNode(t){return!!super.isEqualNode(t)&&(t.name===this.name&&(t.publicId===this.publicId&&t.systemId===this.systemId))}}return Object.defineProperty(t.prototype,"entities",{get:function(){var t,n,r,i,o;for(i={},n=0,r=(o=this.children).length;n<r;n++)(t=o[n]).type!==e.EntityDeclaration||t.pe||(i[t.name]=t);return new a(i)}}),Object.defineProperty(t.prototype,"notations",{get:function(){var t,n,r,i,o;for(i={},n=0,r=(o=this.children).length;n<r;n++)(t=o[n]).type===e.NotationDeclaration&&(i[t.name]=t);return new a(i)}}),Object.defineProperty(t.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(t.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(t.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),t}.call(this)}).call(this)},function(t,e,n){(function(){var e,r;r=n(1),e=n(0),t.exports=class extends r{constructor(t,n,r,i,o,s){if(super(t),null==n)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==r)throw new Error("Missing DTD attribute name. "+this.debugInfo(n));if(!i)throw new Error("Missing DTD attribute type. "+this.debugInfo(n));if(!o)throw new Error("Missing DTD attribute default. "+this.debugInfo(n));if(0!==o.indexOf("#")&&(o="#"+o),!o.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(n));if(s&&!o.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(n));this.elementName=this.stringify.name(n),this.type=e.AttributeDeclaration,this.attributeName=this.stringify.name(r),this.attributeType=this.stringify.dtdAttType(i),s&&(this.defaultValue=this.stringify.dtdAttDefault(s)),this.defaultValueType=o}toString(t){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(t))}}}).call(this)},function(t,e,n){(function(){var e,r,i;({isObject:i}=n(2)),r=n(1),e=n(0),t.exports=function(){class t extends r{constructor(t,n,r,o){if(super(t),null==r)throw new Error("Missing DTD entity name. "+this.debugInfo(r));if(null==o)throw new Error("Missing DTD entity value. "+this.debugInfo(r));if(this.pe=!!n,this.name=this.stringify.name(r),this.type=e.EntityDeclaration,i(o)){if(!o.pubID&&!o.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(r));if(o.pubID&&!o.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(r));if(this.internal=!1,null!=o.pubID&&(this.pubID=this.stringify.dtdPubID(o.pubID)),null!=o.sysID&&(this.sysID=this.stringify.dtdSysID(o.sysID)),null!=o.nData&&(this.nData=this.stringify.dtdNData(o.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(r))}else this.value=this.stringify.dtdEntityValue(o),this.internal=!0}toString(t){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(t))}}return Object.defineProperty(t.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(t.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(t.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(t.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(t.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(t.prototype,"xmlVersion",{get:function(){return null}}),t}.call(this)}).call(this)},function(t,e,n){(function(){var e,r;r=n(1),e=n(0),t.exports=class extends r{constructor(t,n,r){if(super(t),null==n)throw new Error("Missing DTD element name. "+this.debugInfo());r||(r="(#PCDATA)"),Array.isArray(r)&&(r="("+r.join(",")+")"),this.name=this.stringify.name(n),this.type=e.ElementDeclaration,this.value=this.stringify.dtdElementValue(r)}toString(t){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(t))}}}).call(this)},function(t,e,n){(function(){var e,r;r=n(1),e=n(0),t.exports=function(){class t extends r{constructor(t,n,r){if(super(t),null==n)throw new Error("Missing DTD notation name. "+this.debugInfo(n));if(!r.pubID&&!r.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(n));this.name=this.stringify.name(n),this.type=e.NotationDeclaration,null!=r.pubID&&(this.pubID=this.stringify.dtdPubID(r.pubID)),null!=r.sysID&&(this.sysID=this.stringify.dtdSysID(r.sysID))}toString(t){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(t))}}return Object.defineProperty(t.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(t.prototype,"systemId",{get:function(){return this.sysID}}),t}.call(this)}).call(this)},function(t,e,n){(function(){var e,r;e=n(0),r=n(1),t.exports=class extends r{constructor(t,n){if(super(t),null==n)throw new Error("Missing raw text. "+this.debugInfo());this.type=e.Raw,this.value=this.stringify.raw(n)}clone(){return Object.create(this)}toString(t){return this.options.writer.raw(this,this.options.writer.filterOptions(t))}}}).call(this)},function(t,e,n){(function(){var e,r;e=n(0),r=n(3),t.exports=function(){class t extends r{constructor(t,n){if(super(t),null==n)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=e.Text,this.value=this.stringify.text(n)}clone(){return Object.create(this)}toString(t){return this.options.writer.text(this,this.options.writer.filterOptions(t))}splitText(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}replaceWholeText(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}}return Object.defineProperty(t.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(t.prototype,"wholeText",{get:function(){var t,e,n;for(n="",e=this.previousSibling;e;)n=e.data+n,e=e.previousSibling;for(n+=this.data,t=this.nextSibling;t;)n+=t.data,t=t.nextSibling;return n}}),t}.call(this)}).call(this)},function(t,e,n){(function(){var e,r;e=n(0),r=n(3),t.exports=class extends r{constructor(t,n,r){if(super(t),null==n)throw new Error("Missing instruction target. "+this.debugInfo());this.type=e.ProcessingInstruction,this.target=this.stringify.insTarget(n),this.name=this.target,r&&(this.value=this.stringify.insValue(r))}clone(){return Object.create(this)}toString(t){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(t))}isEqualNode(t){return!!super.isEqualNode(t)&&t.target===this.target}}}).call(this)},function(t,e,n){(function(){var e;e=n(24),t.exports=class extends e{constructor(t){super(t)}document(t,e){var n,r,i,o,s;for(e=this.filterOptions(e),o="",r=0,i=(s=t.children).length;r<i;r++)n=s[r],o+=this.writeChildNode(n,e,0);return e.pretty&&o.slice(-e.newline.length)===e.newline&&(o=o.slice(0,-e.newline.length)),o}}}).call(this)},function(t,e){(function(){t.exports=class{hasFeature(t,e){return!0}createDocumentType(t,e,n){throw new Error("This DOM method is not implemented.")}createDocument(t,e,n){throw new Error("This DOM method is not implemented.")}createHTMLDocument(t){throw new Error("This DOM method is not implemented.")}getFeature(t,e){throw new Error("This DOM method is not implemented.")}}}).call(this)},function(t,e,n){(function(){var e,r,i,o,s,a,l;({isPlainObject:l}=n(2)),i=n(19),r=n(29),o=n(1),e=n(0),a=n(23),s=n(18),t.exports=function(){class t extends o{constructor(t){super(null),this.name="#document",this.type=e.Document,this.documentURI=null,this.domConfig=new r,t||(t={}),t.writer||(t.writer=new s),this.options=t,this.stringify=new a(t)}end(t){var e;return e={},t?l(t)&&(e=t,t=this.options.writer):t=this.options.writer,t.document(this,t.filterOptions(e))}toString(t){return this.options.writer.document(this,this.options.writer.filterOptions(t))}createElement(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}createDocumentFragment(){throw new Error("This DOM method is not implemented."+this.debugInfo())}createTextNode(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}createComment(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}createCDATASection(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}createProcessingInstruction(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createAttribute(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}createEntityReference(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}importNode(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createElementNS(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createAttributeNS(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementById(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}adoptNode(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}normalizeDocument(){throw new Error("This DOM method is not implemented."+this.debugInfo())}renameNode(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByClassName(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}createEvent(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}createRange(){throw new Error("This DOM method is not implemented."+this.debugInfo())}createNodeIterator(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())}createTreeWalker(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())}}return Object.defineProperty(t.prototype,"implementation",{value:new i}),Object.defineProperty(t.prototype,"doctype",{get:function(){var t,n,r,i;for(n=0,r=(i=this.children).length;n<r;n++)if((t=i[n]).type===e.DocType)return t;return null}}),Object.defineProperty(t.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(t.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(t.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(t.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration?this.children[0].encoding:null}}),Object.defineProperty(t.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(t.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(t.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(t.prototype,"origin",{get:function(){return null}}),Object.defineProperty(t.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(t.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(t.prototype,"contentType",{get:function(){return null}}),t}.call(this)}).call(this)},function(t,e,n){(function(){var e;e=n(0),n(1),t.exports=function(){class t{constructor(t,n,r){if(this.parent=t,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==n)throw new Error("Missing attribute name. "+this.debugInfo(n));this.name=this.stringify.name(n),this.value=this.stringify.attValue(r),this.type=e.Attribute,this.isId=!1,this.schemaTypeInfo=null}clone(){return Object.create(this)}toString(t){return this.options.writer.attribute(this,this.options.writer.filterOptions(t))}debugInfo(t){return null==(t=t||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+t+"}, parent: <"+this.parent.name+">"}isEqualNode(t){return t.namespaceURI===this.namespaceURI&&(t.prefix===this.prefix&&(t.localName===this.localName&&t.value===this.value))}}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(t){return this.value=t||""}}),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(t.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(t.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"specified",{get:function(){return!0}}),t}.call(this)}).call(this)},function(t,e,n){(function(){var e,r;r=n(1),e=n(0),t.exports=class extends r{constructor(t){super(t),this.type=e.Dummy}clone(){return Object.create(this)}toString(t){return""}}}).call(this)},function(t,e){(function(){var e={}.hasOwnProperty;t.exports=function(){class t{constructor(t){var n,r,i;for(n in this.assertLegalChar=this.assertLegalChar.bind(this),this.assertLegalName=this.assertLegalName.bind(this),t||(t={}),this.options=t,this.options.version||(this.options.version="1.0"),r=t.stringify||{})e.call(r,n)&&(i=r[n],this[n]=i)}name(t){return this.options.noValidation?t:this.assertLegalName(""+t||"")}text(t){return this.options.noValidation?t:this.assertLegalChar(this.textEscape(""+t||""))}cdata(t){return this.options.noValidation?t:(t=(t=""+t||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(t))}comment(t){if(this.options.noValidation)return t;if((t=""+t||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+t);return this.assertLegalChar(t)}raw(t){return this.options.noValidation?t:""+t||""}attValue(t){return this.options.noValidation?t:this.assertLegalChar(this.attEscape(t=""+t||""))}insTarget(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")}insValue(t){if(this.options.noValidation)return t;if((t=""+t||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+t);return this.assertLegalChar(t)}xmlVersion(t){if(this.options.noValidation)return t;if(!(t=""+t||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+t);return t}xmlEncoding(t){if(this.options.noValidation)return t;if(!(t=""+t||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+t);return this.assertLegalChar(t)}xmlStandalone(t){return this.options.noValidation?t:t?"yes":"no"}dtdPubID(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")}dtdSysID(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")}dtdElementValue(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")}dtdAttType(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")}dtdAttDefault(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")}dtdEntityValue(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")}dtdNData(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")}assertLegalChar(t){var e,n;if(this.options.noValidation)return t;if(e="","1.0"===this.options.version){if(e=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=t.match(e))throw new Error(`Invalid character in string: ${t} at index ${n.index}`)}else if("1.1"===this.options.version&&(e=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=t.match(e)))throw new Error(`Invalid character in string: ${t} at index ${n.index}`);return t}assertLegalName(t){var e;if(this.options.noValidation)return t;if(this.assertLegalChar(t),e=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!t.match(e))throw new Error("Invalid character in name");return t}textEscape(t){var e;return this.options.noValidation?t:(e=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))}attEscape(t){var e;return this.options.noValidation?t:(e=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))}}return t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t}.call(this)}).call(this)},function(t,e,n){(function(){var e,r,i,o={}.hasOwnProperty;({assign:i}=n(2)),e=n(0),n(9),n(10),n(7),n(8),n(5),n(15),n(16),n(17),n(22),n(11),n(13),n(12),n(14),r=n(4),t.exports=class{constructor(t){var e,n,r;for(e in t||(t={}),this.options=t,n=t.writer||{})o.call(n,e)&&(r=n[e],this["_"+e]=this[e],this[e]=r)}filterOptions(t){var e,n,o,s,a,l,h,u,c;return t||(t={}),t=i({},this.options,t),(e={writer:this}).pretty=t.pretty||!1,e.allowEmpty=t.allowEmpty||!1,e.indent=null!=(n=t.indent)?n:"  ",e.newline=null!=(o=t.newline)?o:"\n",e.offset=null!=(s=t.offset)?s:0,e.width=null!=(a=t.width)?a:0,e.dontPrettyTextNodes=null!=(l=null!=(h=t.dontPrettyTextNodes)?h:t.dontprettytextnodes)?l:0,e.spaceBeforeSlash=null!=(u=null!=(c=t.spaceBeforeSlash)?c:t.spacebeforeslash)?u:"",!0===e.spaceBeforeSlash&&(e.spaceBeforeSlash=" "),e.suppressPrettyCount=0,e.user={},e.state=r.None,e}indent(t,e,n){var r;return!e.pretty||e.suppressPrettyCount?"":e.pretty&&(r=(n||0)+e.offset+1)>0?new Array(r).join(e.indent):""}endline(t,e,n){return!e.pretty||e.suppressPrettyCount?"":e.newline}attribute(t,e,n){var r;return this.openAttribute(t,e,n),r=e.pretty&&e.width>0?t.name+'="'+t.value+'"':" "+t.name+'="'+t.value+'"',this.closeAttribute(t,e,n),r}cdata(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n)+"<![CDATA[",e.state=r.InsideTag,i+=t.value,e.state=r.CloseTag,i+="]]>"+this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i}comment(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n)+"\x3c!-- ",e.state=r.InsideTag,i+=t.value,e.state=r.CloseTag,i+=" --\x3e"+this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i}declaration(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n)+"<?xml",e.state=r.InsideTag,i+=' version="'+t.version+'"',null!=t.encoding&&(i+=' encoding="'+t.encoding+'"'),null!=t.standalone&&(i+=' standalone="'+t.standalone+'"'),e.state=r.CloseTag,i+=e.spaceBeforeSlash+"?>",i+=this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i}docType(t,e,n){var i,o,s,a,l;if(n||(n=0),this.openNode(t,e,n),e.state=r.OpenTag,a=this.indent(t,e,n),a+="<!DOCTYPE "+t.root().name,t.pubID&&t.sysID?a+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(a+=' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(a+=" [",a+=this.endline(t,e,n),e.state=r.InsideTag,o=0,s=(l=t.children).length;o<s;o++)i=l[o],a+=this.writeChildNode(i,e,n+1);e.state=r.CloseTag,a+="]"}return e.state=r.CloseTag,a+=e.spaceBeforeSlash+">",a+=this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),a}element(t,n,i){var s,a,l,h,u,c,d,p,f,m,y,g,w,b,v,O,D,x;if(i||(i=0),y=!1,this.openNode(t,n,i),n.state=r.OpenTag,g=this.indent(t,n,i)+"<"+t.name,n.pretty&&n.width>0)for(m in d=g.length,b=t.attribs)o.call(b,m)&&(s=b[m],d+(w=this.attribute(s,n,i)).length>n.width?(x=this.indent(t,n,i+1)+w,g+=this.endline(t,n,i)+x,d=x.length):(g+=x=" "+w,d+=x.length));else for(m in v=t.attribs)o.call(v,m)&&(s=v[m],g+=this.attribute(s,n,i));if(h=0===(l=t.children.length)?null:t.children[0],0===l||t.children.every(function(t){return(t.type===e.Text||t.type===e.Raw)&&""===t.value}))n.allowEmpty?(g+=">",n.state=r.CloseTag,g+="</"+t.name+">"+this.endline(t,n,i)):(n.state=r.CloseTag,g+=n.spaceBeforeSlash+"/>"+this.endline(t,n,i));else if(!n.pretty||1!==l||h.type!==e.Text&&h.type!==e.Raw||null==h.value){if(n.dontPrettyTextNodes)for(u=0,p=(O=t.children).length;u<p;u++)if(((a=O[u]).type===e.Text||a.type===e.Raw)&&null!=a.value){n.suppressPrettyCount++,y=!0;break}for(g+=">"+this.endline(t,n,i),n.state=r.InsideTag,c=0,f=(D=t.children).length;c<f;c++)a=D[c],g+=this.writeChildNode(a,n,i+1);n.state=r.CloseTag,g+=this.indent(t,n,i)+"</"+t.name+">",y&&n.suppressPrettyCount--,g+=this.endline(t,n,i),n.state=r.None}else g+=">",n.state=r.InsideTag,n.suppressPrettyCount++,y=!0,g+=this.writeChildNode(h,n,i+1),n.suppressPrettyCount--,y=!1,n.state=r.CloseTag,g+="</"+t.name+">"+this.endline(t,n,i);return this.closeNode(t,n,i),g}writeChildNode(t,n,r){switch(t.type){case e.CData:return this.cdata(t,n,r);case e.Comment:return this.comment(t,n,r);case e.Element:return this.element(t,n,r);case e.Raw:return this.raw(t,n,r);case e.Text:return this.text(t,n,r);case e.ProcessingInstruction:return this.processingInstruction(t,n,r);case e.Dummy:return"";case e.Declaration:return this.declaration(t,n,r);case e.DocType:return this.docType(t,n,r);case e.AttributeDeclaration:return this.dtdAttList(t,n,r);case e.ElementDeclaration:return this.dtdElement(t,n,r);case e.EntityDeclaration:return this.dtdEntity(t,n,r);case e.NotationDeclaration:return this.dtdNotation(t,n,r);default:throw new Error("Unknown XML node type: "+t.constructor.name)}}processingInstruction(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n)+"<?",e.state=r.InsideTag,i+=t.target,t.value&&(i+=" "+t.value),e.state=r.CloseTag,i+=e.spaceBeforeSlash+"?>",i+=this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i}raw(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n),e.state=r.InsideTag,i+=t.value,e.state=r.CloseTag,i+=this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i}text(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n),e.state=r.InsideTag,i+=t.value,e.state=r.CloseTag,i+=this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i}dtdAttList(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n)+"<!ATTLIST",e.state=r.InsideTag,i+=" "+t.elementName+" "+t.attributeName+" "+t.attributeType,"#DEFAULT"!==t.defaultValueType&&(i+=" "+t.defaultValueType),t.defaultValue&&(i+=' "'+t.defaultValue+'"'),e.state=r.CloseTag,i+=e.spaceBeforeSlash+">"+this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i}dtdElement(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n)+"<!ELEMENT",e.state=r.InsideTag,i+=" "+t.name+" "+t.value,e.state=r.CloseTag,i+=e.spaceBeforeSlash+">"+this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i}dtdEntity(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n)+"<!ENTITY",e.state=r.InsideTag,t.pe&&(i+=" %"),i+=" "+t.name,t.value?i+=' "'+t.value+'"':(t.pubID&&t.sysID?i+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(i+=' SYSTEM "'+t.sysID+'"'),t.nData&&(i+=" NDATA "+t.nData)),e.state=r.CloseTag,i+=e.spaceBeforeSlash+">"+this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i}dtdNotation(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n)+"<!NOTATION",e.state=r.InsideTag,i+=" "+t.name,t.pubID&&t.sysID?i+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.pubID?i+=' PUBLIC "'+t.pubID+'"':t.sysID&&(i+=' SYSTEM "'+t.sysID+'"'),e.state=r.CloseTag,i+=e.spaceBeforeSlash+">"+this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i}openNode(t,e,n){}closeNode(t,e,n){}openAttribute(t,e,n){}closeAttribute(t,e,n){}}}).call(this)},function(t,e,n){(function(){var e,r,i,o,s,a,l,h,u;({assign:h,isFunction:u}=n(2)),i=n(19),o=n(20),s=n(34),l=n(18),a=n(35),e=n(0),r=n(4),t.exports.create=function(t,e,n,r){var i,s;if(null==t)throw new Error("Root element needs a name.");return r=h({},e,n,r),s=(i=new o(r)).element(t),r.headless||(i.declaration(r),null==r.pubID&&null==r.sysID||i.dtd(r)),s},t.exports.begin=function(t,e,n){return u(t)&&([e,n]=[t,e],t={}),e?new s(t,e,n):new o(t)},t.exports.stringWriter=function(t){return new l(t)},t.exports.streamWriter=function(t,e){return new a(t,e)},t.exports.implementation=new i,t.exports.nodeType=e,t.exports.writerState=r}).call(this)},function(t,e){t.exports='<div class="m-control m-wmc-container">\n  \x3c!-- TITLE --\x3e\n  <div class="title">Gestión de la sesión</div>\n\n  <input id="tab-wcm-1" class="tabs" data-tab="loadWMC" type="radio" name="tabs-wmc" checked>\n  <label for="tab-wcm-1">Cargar Sesión</label>\n\n  <input id="tab-wcm-2" class="tabs" data-tab="saveWMC" type="radio" name="tabs-wmc">\n  <label for="tab-wcm-2">Guardar Sesión</label>\n  <div class="tabs-border"></div>\n\n  \x3c!-- FORM --\x3e\n  <div id="content-wmc-1" class="content-tab">\n    <div class="form">\n      <div class="info">\n        Carga un WMC v1.1.0 como fichero o desde una url\n      </div>\n      <div class="load-name">\n        <label>Nombre de la sesión</label>\n        <input type="text" value="Sesión">\n      </div>\n      \x3c!-- file --\x3e\n      <div class="file">\n        <label>Fichero WMC</label>\n        <input type="file" accept=".xml">\n      </div>\n      <div class="url">\n        <label>Url WMC</label>\n        <input type="text">\n      </div>\n    </div>\n    \x3c!-- buttons --\x3e\n    <div class="button">\n      <button class="load" title="Cargar WMC" {{#unless layerName}} disabled{{/unless}}> <i class="g-cartografia-subir"></i>\n        Cargar Sesión</button>\n    </div>\n  </div>\n\n  <div id="content-wmc-2" class="content-tab">\n    <div class="form">\n      <div class="info">\n        Guarda un WMC v1.1.0 como fichero\n      </div>\n      \x3c!-- Nombre fichero --\x3e\n      <div class="save-name">\n        <label>Título del fichero de descarga</label>\n        <input type="text" value="Sesión">\n      </div>\n    </div>\n    \x3c!-- buttons --\x3e\n    <div class="button">\n      <button class="save" title="Guardar WMC" {{#unless layerName}} disabled{{/unless}}> <i class="g-cartografia-guardar"></i>\n        Guardar Sesión</button>\n    </div>\n  </div>\n\n</div>'},function(t){t.exports=JSON.parse('{"url":{"name":"Wmc","separator":"*"},"constructor":"M.plugin.Wmc","parameters":[],"files":{"ol":{"scripts":["wmc.ol.min.js"],"styles":["wmc.ol.min.css"]}},"metadata":{"name":"Wmc","description":"Plugin para poder guardar la sesión de trabajo mediante un fichero de contexto de mapa (WMC)","text":"Permite recuperar o compartir, una sesión de trabajo en contexto de mapa en cualquier momento","version":"1.1.0","date":"Junio, 2020","author":"","org":"Instituto de Estadística y Cartografía. Junta de Andalucía","tags":"mapea,plugin","icon":"./facade/assets/icons/icons.svg","centralized":true}}')},function(t,e,n){},function(t,e,n){(function(){var e,r;e=n(30),r=n(31),t.exports=function(){class t{constructor(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}getParameter(t){return this.params.hasOwnProperty(t)?this.params[t]:null}canSetParameter(t,e){return!0}setParameter(t,e){return null!=e?this.params[t]=e:delete this.params[t]}}return Object.defineProperty(t.prototype,"parameterNames",{get:function(){return new r(Object.keys(this.defaultParams))}}),t}.call(this)}).call(this)},function(t,e){(function(){t.exports=class{constructor(){}handleError(t){throw new Error(t)}}}).call(this)},function(t,e){(function(){t.exports=function(){class t{constructor(t){this.arr=t||[]}item(t){return this.arr[t]||null}contains(t){return-1!==this.arr.indexOf(t)}}return Object.defineProperty(t.prototype,"length",{get:function(){return this.arr.length}}),t}.call(this)}).call(this)},function(t,e){(function(){t.exports=function(){class t{constructor(t){this.nodes=t}clone(){return this.nodes=null}item(t){return this.nodes[t]||null}}return Object.defineProperty(t.prototype,"length",{get:function(){return this.nodes.length||0}}),t}.call(this)}).call(this)},function(t,e){(function(){t.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},function(t,e,n){(function(){var e,r,i,o,s,a,l,h,u,c,d,p,f,m,y,g,w,b,v,O,D,x,E={}.hasOwnProperty;({isObject:D,isFunction:O,isPlainObject:x,getValue:v}=n(2)),e=n(0),p=n(20),f=n(5),o=n(7),s=n(8),y=n(15),b=n(16),m=n(17),c=n(9),d=n(10),a=n(11),h=n(12),l=n(13),u=n(14),i=n(21),w=n(23),g=n(18),r=n(4),t.exports=class{constructor(t,n,r){var i;this.name="?xml",this.type=e.Document,t||(t={}),i={},t.writer?x(t.writer)&&(i=t.writer,t.writer=new g):t.writer=new g,this.options=t,this.writer=t.writer,this.writerOptions=this.writer.filterOptions(i),this.stringify=new w(t),this.onDataCallback=n||function(){},this.onEndCallback=r||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}createChildNode(t){var n,r,i,o,s,a,l,h;switch(t.type){case e.CData:this.cdata(t.value);break;case e.Comment:this.comment(t.value);break;case e.Element:for(r in i={},l=t.attribs)E.call(l,r)&&(n=l[r],i[r]=n.value);this.node(t.name,i);break;case e.Dummy:this.dummy();break;case e.Raw:this.raw(t.value);break;case e.Text:this.text(t.value);break;case e.ProcessingInstruction:this.instruction(t.target,t.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+t.constructor.name)}for(s=0,a=(h=t.children).length;s<a;s++)o=h[s],this.createChildNode(o),o.type===e.Element&&this.up();return this}dummy(){return this}node(t,e,n){if(null==t)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(t));return this.openCurrent(),t=v(t),null==e&&(e={}),e=v(e),D(e)||([n,e]=[e,n]),this.currentNode=new f(this,t,e),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=n&&this.text(n),this}element(t,n,r){var i,o,s,a,l,h;if(this.currentNode&&this.currentNode.type===e.DocType)this.dtdElement(...arguments);else if(Array.isArray(t)||D(t)||O(t))for(a=this.options.noValidation,this.options.noValidation=!0,(h=new p(this.options).element("TEMP_ROOT")).element(t),this.options.noValidation=a,o=0,s=(l=h.children).length;o<s;o++)i=l[o],this.createChildNode(i),i.type===e.Element&&this.up();else this.node(t,n,r);return this}attribute(t,e){var n,r;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(t));if(null!=t&&(t=v(t)),D(t))for(n in t)E.call(t,n)&&(r=t[n],this.attribute(n,r));else O(e)&&(e=e.apply()),this.options.keepNullAttributes&&null==e?this.currentNode.attribs[t]=new i(this,t,""):null!=e&&(this.currentNode.attribs[t]=new i(this,t,e));return this}text(t){var e;return this.openCurrent(),e=new b(this,t),this.onData(this.writer.text(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}cdata(t){var e;return this.openCurrent(),e=new o(this,t),this.onData(this.writer.cdata(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}comment(t){var e;return this.openCurrent(),e=new s(this,t),this.onData(this.writer.comment(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}raw(t){var e;return this.openCurrent(),e=new y(this,t),this.onData(this.writer.raw(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}instruction(t,e){var n,r,i,o,s;if(this.openCurrent(),null!=t&&(t=v(t)),null!=e&&(e=v(e)),Array.isArray(t))for(n=0,o=t.length;n<o;n++)r=t[n],this.instruction(r);else if(D(t))for(r in t)E.call(t,r)&&(i=t[r],this.instruction(r,i));else O(e)&&(e=e.apply()),s=new m(this,t,e),this.onData(this.writer.processingInstruction(s,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this}declaration(t,e,n){var r;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return r=new c(this,t,e,n),this.onData(this.writer.declaration(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}doctype(t,e,n){if(this.openCurrent(),null==t)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new d(this,e,n),this.currentNode.rootNodeName=t,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this}dtdElement(t,e){var n;return this.openCurrent(),n=new l(this,t,e),this.onData(this.writer.dtdElement(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}attList(t,e,n,r,i){var o;return this.openCurrent(),o=new a(this,t,e,n,r,i),this.onData(this.writer.dtdAttList(o,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}entity(t,e){var n;return this.openCurrent(),n=new h(this,!1,t,e),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}pEntity(t,e){var n;return this.openCurrent(),n=new h(this,!0,t,e),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}notation(t,e){var n;return this.openCurrent(),n=new u(this,t,e),this.onData(this.writer.dtdNotation(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}up(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this}end(){for(;this.currentLevel>=0;)this.up();return this.onEnd()}openCurrent(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)}openNode(t){var n,i,o,s;if(!t.isOpen){if(this.root||0!==this.currentLevel||t.type!==e.Element||(this.root=t),i="",t.type===e.Element){for(o in this.writerOptions.state=r.OpenTag,i=this.writer.indent(t,this.writerOptions,this.currentLevel)+"<"+t.name,s=t.attribs)E.call(s,o)&&(n=s[o],i+=this.writer.attribute(n,this.writerOptions,this.currentLevel));i+=(t.children?">":"/>")+this.writer.endline(t,this.writerOptions,this.currentLevel),this.writerOptions.state=r.InsideTag}else this.writerOptions.state=r.OpenTag,i=this.writer.indent(t,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+t.rootNodeName,t.pubID&&t.sysID?i+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(i+=' SYSTEM "'+t.sysID+'"'),t.children?(i+=" [",this.writerOptions.state=r.InsideTag):(this.writerOptions.state=r.CloseTag,i+=">"),i+=this.writer.endline(t,this.writerOptions,this.currentLevel);return this.onData(i,this.currentLevel),t.isOpen=!0}}closeNode(t){var n;if(!t.isClosed)return n="",this.writerOptions.state=r.CloseTag,n=t.type===e.Element?this.writer.indent(t,this.writerOptions,this.currentLevel)+"</"+t.name+">"+this.writer.endline(t,this.writerOptions,this.currentLevel):this.writer.indent(t,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(t,this.writerOptions,this.currentLevel),this.writerOptions.state=r.None,this.onData(n,this.currentLevel),t.isClosed=!0}onData(t,e){return this.documentStarted=!0,this.onDataCallback(t,e+1)}onEnd(){return this.documentCompleted=!0,this.onEndCallback()}debugInfo(t){return null==t?"":"node: <"+t+">"}ele(){return this.element(...arguments)}nod(t,e,n){return this.node(t,e,n)}txt(t){return this.text(t)}dat(t){return this.cdata(t)}com(t){return this.comment(t)}ins(t,e){return this.instruction(t,e)}dec(t,e,n){return this.declaration(t,e,n)}dtd(t,e,n){return this.doctype(t,e,n)}e(t,e,n){return this.element(t,e,n)}n(t,e,n){return this.node(t,e,n)}t(t){return this.text(t)}d(t){return this.cdata(t)}c(t){return this.comment(t)}r(t){return this.raw(t)}i(t,e){return this.instruction(t,e)}att(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList(...arguments):this.attribute(...arguments)}a(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList(...arguments):this.attribute(...arguments)}ent(t,e){return this.entity(t,e)}pent(t,e){return this.pEntity(t,e)}not(t,e){return this.notation(t,e)}}}).call(this)},function(t,e,n){(function(){var e,r,i,o={}.hasOwnProperty;e=n(0),i=n(24),r=n(4),t.exports=class extends i{constructor(t,e){super(e),this.stream=t}endline(t,e,n){return t.isLastRootNode&&e.state===r.CloseTag?"":super.endline(t,e,n)}document(t,e){var n,r,i,o,s,a,l,h,u;for(r=i=0,s=(l=t.children).length;i<s;r=++i)(n=l[r]).isLastRootNode=r===t.children.length-1;for(e=this.filterOptions(e),u=[],o=0,a=(h=t.children).length;o<a;o++)n=h[o],u.push(this.writeChildNode(n,e,0));return u}cdata(t,e,n){return this.stream.write(super.cdata(t,e,n))}comment(t,e,n){return this.stream.write(super.comment(t,e,n))}declaration(t,e,n){return this.stream.write(super.declaration(t,e,n))}docType(t,e,n){var i,o,s,a;if(n||(n=0),this.openNode(t,e,n),e.state=r.OpenTag,this.stream.write(this.indent(t,e,n)),this.stream.write("<!DOCTYPE "+t.root().name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(t,e,n)),e.state=r.InsideTag,o=0,s=(a=t.children).length;o<s;o++)i=a[o],this.writeChildNode(i,e,n+1);e.state=r.CloseTag,this.stream.write("]")}return e.state=r.CloseTag,this.stream.write(e.spaceBeforeSlash+">"),this.stream.write(this.endline(t,e,n)),e.state=r.None,this.closeNode(t,e,n)}element(t,n,i){var s,a,l,h,u,c,d,p,f,m,y,g,w,b;if(i||(i=0),this.openNode(t,n,i),n.state=r.OpenTag,f=this.indent(t,n,i)+"<"+t.name,n.pretty&&n.width>0)for(p in c=f.length,y=t.attribs)o.call(y,p)&&(s=y[p],c+(m=this.attribute(s,n,i)).length>n.width?(b=this.indent(t,n,i+1)+m,f+=this.endline(t,n,i)+b,c=b.length):(f+=b=" "+m,c+=b.length));else for(p in g=t.attribs)o.call(g,p)&&(s=g[p],f+=this.attribute(s,n,i));if(this.stream.write(f),h=0===(l=t.children.length)?null:t.children[0],0===l||t.children.every(function(t){return(t.type===e.Text||t.type===e.Raw)&&""===t.value}))n.allowEmpty?(this.stream.write(">"),n.state=r.CloseTag,this.stream.write("</"+t.name+">")):(n.state=r.CloseTag,this.stream.write(n.spaceBeforeSlash+"/>"));else if(!n.pretty||1!==l||h.type!==e.Text&&h.type!==e.Raw||null==h.value){for(this.stream.write(">"+this.endline(t,n,i)),n.state=r.InsideTag,u=0,d=(w=t.children).length;u<d;u++)a=w[u],this.writeChildNode(a,n,i+1);n.state=r.CloseTag,this.stream.write(this.indent(t,n,i)+"</"+t.name+">")}else this.stream.write(">"),n.state=r.InsideTag,n.suppressPrettyCount++,!0,this.writeChildNode(h,n,i+1),n.suppressPrettyCount--,!1,n.state=r.CloseTag,this.stream.write("</"+t.name+">");return this.stream.write(this.endline(t,n,i)),n.state=r.None,this.closeNode(t,n,i)}processingInstruction(t,e,n){return this.stream.write(super.processingInstruction(t,e,n))}raw(t,e,n){return this.stream.write(super.raw(t,e,n))}text(t,e,n){return this.stream.write(super.text(t,e,n))}dtdAttList(t,e,n){return this.stream.write(super.dtdAttList(t,e,n))}dtdElement(t,e,n){return this.stream.write(super.dtdElement(t,e,n))}dtdEntity(t,e,n){return this.stream.write(super.dtdEntity(t,e,n))}dtdNotation(t,e,n){return this.stream.write(super.dtdNotation(t,e,n))}}}).call(this)},function(t,e,n){"use strict";n.r(e);n(28);var r=n(25);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,l(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,M.impl.Control),n=e,(r=[{key:"addTo",value:function(t,n){this.facadeMap_=t,this.element=n;var r=t.getMapImpl();ol.control.Control.call(this,{element:n,target:null}),r.addControl(this),a(l(e.prototype),"addTo",this).call(this,t,n)}},{key:"activate",value:function(){}},{key:"deactivate",value:function(){}},{key:"getViewContext",value:function(){var t={General:{BoundingBox:{}},LayerList:{Layer:[]},$version:"1.1.0",$xmlns:"http://www.opengis.net/context",$id:"Contexto_IECA","$xmlns:xlink":"http://www.w3.org/1999/xlink","$xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","$xsi:schemaLocation":"http://www.opengis.net/context http://schemas.opengis.net/context/1.1.0/context.xsd"};t.General.Title="WMC IECA",t.General.BoundingBox.$SRS=this.facadeMap_.getProjection().code;var e=this.facadeMap_.getBbox();t.General.BoundingBox.$minx=e.x.min,t.General.BoundingBox.$miny=e.y.min,t.General.BoundingBox.$maxx=e.x.max,t.General.BoundingBox.$maxy=e.y.max,t.General.KeywordList={Keyword:["IECA"]},t.General.Abstract="Fichero de configuración del contexto de visualización de capas.",t.General.Extension={};var n=this.facadeMap_.getMaxExtent();n&&(t.General.Extension["ol:maxExtent"]={"$xmlns:ol":"http://openlayers.org/context",$minx:n.x?n.x.min:n[0],$miny:n.y?n.x.min:n[1],$maxx:n.x?n.x.min:n[2],$maxy:n.y?n.x.min:n[3]});var r=!0,i=!1,o=void 0;try{for(var s,a=this.facadeMap_.getWMS()[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value,h={};h.$hidden=l.isVisible()?0:1,h.$queryable=l.isQueryable()?1:0,h.Name=l.name,h.Title=l.legend,h.Server={OnlineResource:{"$xmlns:xlink":"http://www.w3.org/1999/xlink","$xlink:type":"simple","$xlink:href":l.url},$service:"OGC:WMS",$version:l.version},l.transparent||(h.StyleList={Style:[{$current:1,Name:"Default",Title:"Default",LegendURL:{$width:200,$height:120,$format:"image/png",OnlineResource:{"$xmlns:xlink":"http://www.w3.org/1999/xlink","$xlink:type":"simple","$xlink:href":l.getLegendURL()}}}]}),h.Extension={"ol:opacity":{"#text":l.getOpacity(),"$xmlns:ol":"http://openlayers.org/context"},"ol:transparent":{"#text":l.transparent,"$xmlns:ol":"http://openlayers.org/context"},"ol:isBaseLayer":{"#text":!l.transparent,"$xmlns:ol":"http://openlayers.org/context"},"ol:displayInLayerSwitcher":{"#text":l.displayInLayerSwitcher,"$xmlns:ol":"http://openlayers.org/context"},"ol:singleTile":{"#text":l.tiled,"$xmlns:ol":"http://openlayers.org/context"}},t.LayerList.Layer.push(h)}}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return t}}])&&o(n.prototype,r),i&&o(n,i),e}(),c=n(26),d=n.n(c);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var w=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=m(this,y(e).call(this,t))).projection=null,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(e,M.impl.layer.WMC),n=e,(r=[{key:"select",value:function(){if(!1===this.selected){if(this.map.getWMC().forEach(function(t){t.unselect()}),this.selected=!0,this.projection&&this.map.setProjection({code:this.projection.getCode(),units:this.projection.getUnits()},!0),!M.utils.isNullOrEmpty(this.bbox))try{this.map.setBbox(this.bbox,{nearest:!0})}catch(t){M.dialog.info(t)}M.utils.isNullOrEmpty(this.maxExtent)||this.map.setMaxExtent(this.maxExtent,!1),this.layers.length&&this.map.addWMS(this.layers,!0),this.map.fire(M.evt.CHANGE_WMC,this)}}},{key:"loadContext",value:function(t){var e=this;return new Promise(function(n,r){try{if(t){var i=(M.impl.format.wmc?new M.impl.format.wmc.WMC:new M.impl.format.WMC).readFromDocument(t);n(i)}else e.url?M.remote.get(e.url).then(function(t){var e=t.xml,r=(M.impl.format.wmc?new M.impl.format.wmc.WMC:new M.impl.format.WMC).readFromDocument(e);n(r)}):r("No hay contexto")}catch(t){r(t)}})}},{key:"loadLayers",value:function(){this.map&&this.map.addWMS(this.layers,!0)}},{key:"loadContextParameters",value:function(t){this.layers=t.layers,this.layers.sort(function(t,e){var n=1,r=t.isVisible(),i=e.isVisible(),o=!t.transparent,s=!e.transparent;return r&&i||!r&&!i||!o||!s?n=0:r&&(n=-1),n}),this.bbox={x:{min:t.bounds[0],max:t.bounds[2]},y:{min:t.bounds[1],max:t.bounds[3]}},this.maxExtent={x:{min:t.maxExtent[0],max:t.maxExtent[2]},y:{min:t.maxExtent[1],max:t.maxExtent[3]}},this.projection=ol.proj.get(t.projection)}}])&&f(n.prototype,r),i&&f(n,i),e}();function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var x=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=v(this,O(e).call(this,"http://prueba.es"))).url=null,M.utils.isUndefined(w)&&M.exception("La implementación usada no puede crear controles WMCLayerImpl");var r=new w(n);return t.setImpl(r),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(e,M.layer.WMC),e}();function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t,e){return!e||"object"!==E(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var P=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),M.utils.isUndefined(u)&&M.exception("La implementación usada no puede crear controles WMCControl");var n=new u;return(t=I(this,N(e).call(this,n,"wmc"))).file_=null,t.inputUrl_=null,t.loadBtn_=null,t.saveBtn_=null,t.inputsTabs_=null,t.selectedTab_="",t.inputWMCLoadName_=null,t.inputWMCSaveName_=null,t.facadeMap_=null,t}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(e,M.Control),n=e,(i=[{key:"addEvents",value:function(t){var e=this,n=t.querySelector(".form div.file > input");this.loadBtn_=t.querySelector(".button > button.load"),this.saveBtn_=t.querySelector(".button > button.save"),this.inputUrl_=t.querySelector(".form div.url > input"),this.inputsTabs_=t.querySelectorAll('input[name="tabs-wmc"]'),this.selectedTab_=t.querySelector('input[name="tabs-wmc"]:checked').dataset.tab,this.inputWMCLoadName_=t.querySelector(".form div.load-name > input"),this.inputWMCSaveName_=t.querySelector(".form div.save-name > input"),n.addEventListener("change",function(t){return e.changeFile(t,n.files[0])}),this.loadBtn_.addEventListener("click",function(t){return e.loadWMC()}),this.saveBtn_.addEventListener("click",function(t){return e.saveWMC()}),this.inputUrl_.addEventListener("input",function(t){return e.checkButtons()}),this.inputWMCLoadName_.addEventListener("input",function(t){return e.checkButtons()}),this.inputWMCSaveName_.addEventListener("input",function(t){return e.checkButtons()}),this.inputsTabs_.forEach(function(t){t.addEventListener("change",function(t){return e.changeTab(t)})})}},{key:"createView",value:function(t){var e=this;return this.facadeMap_=t,new Promise(function(t,n){var r=M.template.compileSync(d.a);e.addEvents(r),t(r)})}},{key:"equals",value:function(t){return t instanceof e}},{key:"getQuerySelectorScapeCSS",value:function(t,e){return t.querySelector(CSS.escape(e))}},{key:"changeTab",value:function(t){var e=(t||window.event).target;this.selectedTab_=e.dataset.tab,this.checkButtons()}},{key:"checkButtons",value:function(){"loadWMC"===this.selectedTab_?(this.loadBtn_.disabled=M.utils.isNullOrEmpty(this.file_)&&M.utils.isNullOrEmpty(this.inputUrl_.value)||M.utils.isNullOrEmpty(this.inputWMCLoadName_.value),this.inputUrl_.disabled=!M.utils.isNullOrEmpty(this.file_)):this.saveBtn_.disabled=M.utils.isNullOrEmpty(this.inputWMCSaveName_.value)}},{key:"changeFile",value:function(t,e){this.file_=e,this.inputWMCLoadName_.value=this.file_.name.replace(/\.[^\/.]+$/,""),this.checkButtons(),M.utils.isNullOrEmpty(e)||e.size>20971520&&(M.dialog.info("El fichero seleccionado sobrepasa el máximo de 20 MB permitido"),this.file_=null,this.checkButtons())}},{key:"changeName",value:function(t){var e=(t||window.event).target;this.loadBtn_.disabled=""===e.value.trim()}},{key:"saveWMC",value:function(){try{if("Blob"in window){var t="".concat(this.inputWMCSaveName_.value,".xml"),e=this.getImpl().getViewContext(),n=r.create({ViewContext:e},{stringify:{convertAttKey:"$"},encoding:"utf-8"}).end(),i=new Blob([n],{type:"text/plain;charset=utf-8"});if("msSaveOrOpenBlob"in navigator)navigator.msSaveOrOpenBlob(i,t);else{var o=document.createElement("a");o.download=t,o.innerHTML="Download File","webkitURL"in window?o.href=window.URL.createObjectURL(i):(o.href=window.URL.createObjectURL(i),o.onclick=this.destroyClickedElement,o.style.display="none",document.body.appendChild(o)),o.click()}}else M.dialog.info("Tu navegador no soporta la descarga de ficheros Blob HML5")}catch(t){M.dialog.error("Error al guardar el contexto del mapa")}}},{key:"loadWMC",value:function(){var t,e=this;if(this.file_){var n=new FileReader;n.addEventListener("load",function(r){var i;"undefined"!=typeof DOMParser&&(i=(new DOMParser).parseFromString(n.result,"text/xml")),t={documentXML:i},e.addToMap(t)}),n.readAsText(this.file_)}else t={url:this.inputUrl_.value},this.addToMap(t)}},{key:"addToMap",value:function(t){var e=this;try{var n=new x(t);n.name=this.inputWMCLoadName_.value,n.url=t.url;var r=this.facadeMap_.getWMC(n);0===r.length?(this.facadeMap_.getImpl().addWMC([n]),this.facadeMap_.fire(M.evt.ADDED_LAYER,[n]),this.facadeMap_.fire(M.evt.ADDED_WMC,[n]),n.getImpl().loadContext(t.documentXML).then(function(t){n.getImpl().loadContextParameters(t);var r=e.facadeMap_.getControls("wmcselector").length>0;e.facadeMap_.getWMC().length>1&&!r&&e.facadeMap_.addControls(new M.control.WMCSelector),n.select()})):r[0].select()}catch(t){M.dialog.error("Error al cargar el fichero. Compruebe que se trata del fichero correcto")}}},{key:"destroyClickedElement_",value:function(t){document.body.removeChild(t.target)}}])&&T(n.prototype,i),o&&T(n,o),e}(),S=n(27);function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _(t,e){return!e||"object"!==j(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function F(t,e){return(F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var k=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=_(this,A(e).call(this,n))).map_=null,t.control_=null,t.panel_=null,t.params_={},M.utils.isNullOrEmpty(n.params)||(t.params_=n.params),t.options_={},M.utils.isNullOrEmpty(n.options)||(t.options_=n.options),t.metadata_=S.metadata,t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F(t,e)}(e,M.Plugin),n=e,(r=[{key:"addTo",value:function(t){var e=this;this.map_=t,this.control_=new P,this.panel_=new M.ui.Panel("panelWmc",{collapsible:!0,className:"m-wmc",collapsedButtonClass:"g-cartografia-opciones",position:M.ui.position.TR,tooltip:"Gestión de WMC"}),this.panel_.on(M.evt.ADDED_TO_MAP,function(t){M.utils.enableTouchScroll(t)}),this.panel_.addControls(this.control_),this.map_.addPanels(this.panel_),this.control_.on(M.evt.ADDED_TO_MAP,function(){e.fire(M.evt.ADDED_TO_MAP)})}},{key:"destroy",value:function(){this.map_.removeControls([this.control_]);var t=[null,null,null,null];this.map_=t[0],this.control_=t[1],this.panel_=t[2],this.options_=t[3]}},{key:"equals",value:function(t){var n=!1;return t instanceof e&&(n=!0),n}},{key:"getMetadata",value:function(){return this.metadata_}},{key:"name",get:function(){return"wmc"}}])&&L(n.prototype,r),i&&L(n,i),e}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.Wmc=k,window.M.control.WmcControl=P,window.M.impl.control.WmcControl=u,window.M.impl.control.WmcLayer=w}]);
//# sourceMappingURL=wmc.ol.min.js.map